{"ast":null,"code":"var _jsxFileName = \"/home/joserevete/Documentos/minisplit/pagina/minisplit-master/src/routes/SectionRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { hasAllPermissions, hasAnyPermissions } from './RequirePermissions';\nimport UnauthorizedPage from '../pages/ErrorPages/403';\nimport { useUserPermission } from '../common/hooks/useUserPermission';\nimport { Spin } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst matchAll = match => match === 'all';\nconst SectionRoute = ({\n  permissions,\n  matchPermission = 'all',\n  children\n}) => {\n  _s();\n  const {\n    permissionCodes,\n    loading\n  } = useUserPermission();\n  const [showContent, setShowContent] = useState(false);\n\n  // Todo eliminar el useEffect e implementar un loading\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setShowContent(true);\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Todo eliminar showContent state e implement loading\n  // Prevents race condition\n  if (loading || !showContent) {\n    return /*#__PURE__*/_jsxDEV(Spin, {\n      style: {\n        width: '100%',\n        height: 'calc(100vh - 140px)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this);\n  }\n  const hasSectionPermissions = () => {\n    if (!permissions) {\n      return true;\n    }\n    if (matchAll(matchPermission)) {\n      return hasAllPermissions(permissions, permissionCodes);\n    }\n    return hasAnyPermissions(permissions, permissionCodes);\n  };\n  return hasSectionPermissions() ? children : /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 47\n  }, this);\n};\n_s(SectionRoute, \"3ZIyeFXOO0tMeSqRtg1/pllsUto=\", false, function () {\n  return [useUserPermission];\n});\n_c = SectionRoute;\nSectionRoute.displayName = 'Route';\nexport default SectionRoute;\nvar _c;\n$RefreshReg$(_c, \"SectionRoute\");","map":{"version":3,"names":["React","useEffect","useState","hasAllPermissions","hasAnyPermissions","UnauthorizedPage","useUserPermission","Spin","jsxDEV","_jsxDEV","matchAll","match","SectionRoute","permissions","matchPermission","children","_s","permissionCodes","loading","showContent","setShowContent","timer","setTimeout","clearTimeout","style","width","height","display","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","hasSectionPermissions","_c","displayName","$RefreshReg$"],"sources":["/home/joserevete/Documentos/minisplit/pagina/minisplit-master/src/routes/SectionRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { hasAllPermissions, hasAnyPermissions } from './RequirePermissions'\nimport UnauthorizedPage from '../pages/ErrorPages/403'\nimport { useUserPermission } from '../common/hooks/useUserPermission'\nimport { Spin } from 'antd'\n\nconst matchAll = match => match === 'all'\n\nconst SectionRoute = ({ permissions, matchPermission = 'all', children }) => {\n  const { permissionCodes, loading } = useUserPermission()\n\n  const [showContent, setShowContent] = useState(false)\n\n  // Todo eliminar el useEffect e implementar un loading\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setShowContent(true)\n    }, 500)\n\n    return () => clearTimeout(timer)\n  }, [])\n\n  // Todo eliminar showContent state e implement loading\n  // Prevents race condition\n  if (loading || !showContent) {\n    return (\n      <Spin\n        style={{\n          width: '100%',\n          height: 'calc(100vh - 140px)',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      />\n    )\n  }\n\n  const hasSectionPermissions = () => {\n    if (!permissions) {\n      return true\n    }\n\n    if (matchAll(matchPermission)) {\n      return hasAllPermissions(permissions, permissionCodes)\n    }\n\n    return hasAnyPermissions(permissions, permissionCodes)\n  }\n\n  return hasSectionPermissions() ? children : <UnauthorizedPage />\n}\n\nSectionRoute.displayName = 'Route'\nexport default SectionRoute\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,iBAAiB,EAAEC,iBAAiB,QAAQ,sBAAsB;AAC3E,OAAOC,gBAAgB,MAAM,yBAAyB;AACtD,SAASC,iBAAiB,QAAQ,mCAAmC;AACrE,SAASC,IAAI,QAAQ,MAAM;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE3B,MAAMC,QAAQ,GAAGC,KAAK,IAAIA,KAAK,KAAK,KAAK;AAEzC,MAAMC,YAAY,GAAGA,CAAC;EAAEC,WAAW;EAAEC,eAAe,GAAG,KAAK;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC3E,MAAM;IAAEC,eAAe;IAAEC;EAAQ,CAAC,GAAGZ,iBAAiB,CAAC,CAAC;EAExD,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACAD,SAAS,CAAC,MAAM;IACd,MAAMoB,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC7BF,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAMG,YAAY,CAACF,KAAK,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA,IAAIH,OAAO,IAAI,CAACC,WAAW,EAAE;IAC3B,oBACEV,OAAA,CAACF,IAAI;MACHiB,KAAK,EAAE;QACLC,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,qBAAqB;QAC7BC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE;MACd;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEN;EAEA,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAI,CAACrB,WAAW,EAAE;MAChB,OAAO,IAAI;IACb;IAEA,IAAIH,QAAQ,CAACI,eAAe,CAAC,EAAE;MAC7B,OAAOX,iBAAiB,CAACU,WAAW,EAAEI,eAAe,CAAC;IACxD;IAEA,OAAOb,iBAAiB,CAACS,WAAW,EAAEI,eAAe,CAAC;EACxD,CAAC;EAED,OAAOiB,qBAAqB,CAAC,CAAC,GAAGnB,QAAQ,gBAAGN,OAAA,CAACJ,gBAAgB;IAAAyB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAClE,CAAC;AAAAjB,EAAA,CA3CKJ,YAAY;EAAA,QACqBN,iBAAiB;AAAA;AAAA6B,EAAA,GADlDvB,YAAY;AA6ClBA,YAAY,CAACwB,WAAW,GAAG,OAAO;AAClC,eAAexB,YAAY;AAAA,IAAAuB,EAAA;AAAAE,YAAA,CAAAF,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}