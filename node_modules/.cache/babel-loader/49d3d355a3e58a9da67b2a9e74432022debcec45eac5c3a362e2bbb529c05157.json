{"ast":null,"code":"import { Alert } from \"../components/ui/alert\";\nimport axios from \"axios\";\nimport { config } from \"../common/config\";\n// import { api } from \"../config\";\n\naxios.defaults.baseURL = config.apiUrl;\n// Header CSRF Token fijo para todas las peticiones\naxios.defaults.headers.common[\"X-CSRFTOKEN\"] = \"POq5FIzT1mANEaKIlSBl1PPMpDpD0bB9NkzxYgXY9W3y4d3yI4cZfthb4M2wS44z\";\n\n// content type\n// const authUser = localStorage.getItem(\"authUser\")\n// const token = JSON.parse(authUser) ? JSON.parse(authUser).data.access_token : null;\n\n// if (token)\n//   axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n// Configurar interceptor de respuesta para mostrar notificaciones de error para códigos diferentes a 200\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  // Si hay un error en la solicitud, mostrar notificación de error para códigos diferentes a 200\n  if (error.response && error.response.status !== 200 && error.response.status !== 401) {\n    let desc = error.response.data && error.response.data.message;\n    if (typeof desc !== 'string') {\n      desc = JSON.stringify(desc || error.message || error);\n    }\n    Alert({\n      message: 'Error',\n      description: desc\n    });\n  }\n  return Promise.reject(error);\n});\n\n// intercepting to capture errors\naxios.interceptors.response.use(function (response) {\n  return response.data ? response.data : response;\n}, function (error) {\n  // Any status codes that falls outside the range of 2xx cause this function to trigger\n  const errorObject = {\n    status: error.response ? error.response.status : 500\n  };\n  switch (error.status) {\n    case 500:\n      errorObject.message = \"Internal Server Error\";\n      break;\n    case 401:\n      errorObject.message = \"Invalid credentials\";\n      break;\n    case 404:\n      errorObject.message = \"Sorry! the data you are looking for could not be found\";\n      break;\n    default:\n      errorObject.message = error.message || error;\n  }\n  return Promise.reject(errorObject);\n});\n\n/**\n * Sets the default authorization\n * @param {*} token\n */\n// const setAuthorization = (token) => {\n//   axios.defaults.headers.common[\"Authorization\"] = token;\n// };\n\n// Interceptor para agregar token de autorización a todas las solicitudes\n/* axios.interceptors.request.use(config => {\n  const userData = localStorage.getItem('authUser');\n  const token = JSON.parse(userData) ? JSON.parse(userData)?.data?.access_token : null;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n}); */\n\nclass APIClient {\n  constructor() {\n    /**\n     * Fetches data from given url\n     */\n    this.getMe = (url, config) => {\n      return axios.get(url, config);\n    };\n    this.get = (url, params) => {\n      console.log(\"GET URL:\", url);\n      console.log(\"GET PARAMS:\", params);\n      console.log(\"base de axios:\", axios.defaults.baseURL);\n      let response;\n      let paramKeys = [];\n      if (params) {\n        Object.keys(params).forEach(key => {\n          if (params[key] === '' || params[key] === null || params[key] === undefined) {\n            return;\n          }\n          paramKeys.push(`${key}=${params[key]}`);\n        });\n        const queryString = paramKeys && paramKeys.length ? paramKeys.join('&') : \"\";\n        response = axios.get(`${url}?${queryString}`, params);\n      } else {\n        response = axios.get(`${url}`, params);\n      }\n      return response;\n    };\n    /**\n     * post given data to url\n     */\n    this.create = (url, data) => {\n      return axios.post(url, data);\n    };\n    /**\n     * Updates data with patch\n     */\n    this.update = (url, data) => {\n      return axios.patch(url, data);\n    };\n    /**\n     * Updates data with put\n     */\n    this.put = (url, data) => {\n      return axios.put(url, data);\n    };\n    /**\n     * Delete\n     */\n    this.delete = (url, config) => {\n      return axios.delete(url, {\n        ...config\n      });\n    };\n  }\n}\nconst getLoggedinUser = () => {\n  const user = localStorage.getItem(\"authUser\");\n  if (!user) {\n    return null;\n  } else {\n    return JSON.parse(user);\n  }\n};\nexport { APIClient, getLoggedinUser };","map":{"version":3,"names":["Alert","axios","config","defaults","baseURL","apiUrl","headers","common","interceptors","response","use","error","status","desc","data","message","JSON","stringify","description","Promise","reject","errorObject","APIClient","constructor","getMe","url","get","params","console","log","paramKeys","Object","keys","forEach","key","undefined","push","queryString","length","join","create","post","update","patch","put","delete","getLoggedinUser","user","localStorage","getItem","parse"],"sources":["/home/joserevete/Documentos/minisplit/pagina/MiniSplitMaster-FrontEnd/src/helpers/api_helper.js"],"sourcesContent":["import { Alert } from \"../components/ui/alert\";\nimport axios from \"axios\";\nimport { config } from \"../common/config\";\n// import { api } from \"../config\";\n\naxios.defaults.baseURL = config.apiUrl;\n// Header CSRF Token fijo para todas las peticiones\naxios.defaults.headers.common[\"X-CSRFTOKEN\"] = \"POq5FIzT1mANEaKIlSBl1PPMpDpD0bB9NkzxYgXY9W3y4d3yI4cZfthb4M2wS44z\";\n\n// content type\n// const authUser = localStorage.getItem(\"authUser\")\n// const token = JSON.parse(authUser) ? JSON.parse(authUser).data.access_token : null;\n\n// if (token)\n//   axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n// Configurar interceptor de respuesta para mostrar notificaciones de error para códigos diferentes a 200\naxios.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    // Si hay un error en la solicitud, mostrar notificación de error para códigos diferentes a 200\n    if (error.response && error.response.status !== 200 && error.response.status !== 401) {\n      let desc = error.response.data && error.response.data.message;\n      if (typeof desc !== 'string') {\n        desc = JSON.stringify(desc || error.message || error);\n      }\n      Alert({\n        message: 'Error',\n        description: desc\n      });\n    }\n    return Promise.reject(error);\n  }\n);\n\n// intercepting to capture errors\naxios.interceptors.response.use(\n  function (response) {\n    return response.data ? response.data : response;\n  },\n\n  function (error) {\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\n    const errorObject = {\n      status: error.response ? error.response.status : 500,\n    };\n    switch (error.status) {\n      case 500:\n       errorObject.message = \"Internal Server Error\";\n        break;\n      case 401:\n        errorObject.message = \"Invalid credentials\";\n        break;\n      case 404:\n        errorObject.message = \"Sorry! the data you are looking for could not be found\";\n        break;\n      default:\n        errorObject.message = error.message || error;\n    }\n    return Promise.reject(errorObject);\n  }\n);\n\n/**\n * Sets the default authorization\n * @param {*} token\n */\n// const setAuthorization = (token) => {\n//   axios.defaults.headers.common[\"Authorization\"] = token;\n// };\n\n// Interceptor para agregar token de autorización a todas las solicitudes\n/* axios.interceptors.request.use(config => {\n  const userData = localStorage.getItem('authUser');\n  const token = JSON.parse(userData) ? JSON.parse(userData)?.data?.access_token : null;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n}); */\n\nclass APIClient {\n  /**\n   * Fetches data from given url\n   */\n\n   getMe = (url, config) => {\n    return axios.get(url, config);\n  };\n  get = (url, params) => {\n    console.log(\"GET URL:\", url);\n    console.log(\"GET PARAMS:\", params);\n    console.log(\"base de axios:\", axios.defaults.baseURL);\n    let response;\n\n    let paramKeys = [];\n\n    if (params) {\n      Object.keys(params).forEach((key) => {\n        if (params[key] === '' || params[key] === null || params[key] === undefined) {\n          return;\n        }\n        paramKeys.push(`${key}=${params[key]}`);\n      });\n\n      const queryString = paramKeys && paramKeys.length ? paramKeys.join('&') : \"\";\n      response = axios.get(`${url}?${queryString}`, params);\n    } else {\n      response = axios.get(`${url}`, params);\n    }\n\n    return response;\n  };\n\n  /**\n   * post given data to url\n   */\n  create = (url, data) => {\n    return axios.post(url, data);\n  };\n  /**\n   * Updates data with patch\n   */\n  update = (url, data) => {\n    return axios.patch(url, data);\n  };\n\n  /**\n   * Updates data with put\n   */\n  put = (url, data) => {\n    return axios.put(url, data);\n  };\n\n  /**\n   * Delete\n   */\n  delete = (url, config) => {\n    return axios.delete(url, { ...config });\n  };\n}\nconst getLoggedinUser = () => {\n  const user = localStorage.getItem(\"authUser\");\n  if (!user) {\n    return null;\n  } else {\n    return JSON.parse(user);\n  }\n};\n\nexport { APIClient, getLoggedinUser };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}