{"ast":null,"code":"import { message, notification } from \"antd\";\nimport axios from \"axios\";\nimport { config } from \"../common/config\";\n// import { api } from \"../config\";\n\naxios.defaults.baseURL = config.apiUrl;\n\n// content type\n// const authUser = localStorage.getItem(\"authUser\")\n// const token = JSON.parse(authUser) ? JSON.parse(authUser).data.access_token : null;\n\n// if (token)\n//   axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n// Configurar interceptor de respuesta para mostrar notificaciones de error para códigos diferentes a 200\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  // Si hay un error en la solicitud, mostrar notificación de error para códigos diferentes a 200\n  if (error.response && error.response.status !== 200 && error.response.status !== 401) {\n    notification.error({\n      message: 'Error',\n      description: `${error.response.data.message}`\n    });\n  }\n  return Promise.reject(error);\n});\n\n// intercepting to capture errors\naxios.interceptors.response.use(function (response) {\n  return response.data ? response.data : response;\n}, function (error) {\n  // Any status codes that falls outside the range of 2xx cause this function to trigger\n  const errorObject = {\n    status: error.response ? error.response.status : 500\n  };\n  switch (error.status) {\n    case 500:\n      errorObject.message = \"Internal Server Error\";\n      break;\n    case 401:\n      errorObject.message = \"Invalid credentials\";\n      break;\n    case 404:\n      errorObject.message = \"Sorry! the data you are looking for could not be found\";\n      break;\n    default:\n      errorObject.message = error.message || error;\n  }\n  return Promise.reject(errorObject);\n});\n\n/**\n * Sets the default authorization\n * @param {*} token\n */\n// const setAuthorization = (token) => {\n//   axios.defaults.headers.common[\"Authorization\"] = token;\n// };\n\n// Interceptor para agregar token de autorización a todas las solicitudes\naxios.interceptors.request.use(config => {\n  var _JSON$parse, _JSON$parse$data;\n  const userData = localStorage.getItem('authUser');\n  const token = JSON.parse(userData) ? (_JSON$parse = JSON.parse(userData)) === null || _JSON$parse === void 0 ? void 0 : (_JSON$parse$data = _JSON$parse.data) === null || _JSON$parse$data === void 0 ? void 0 : _JSON$parse$data.access_token : null;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nclass APIClient {\n  constructor() {\n    /**\n     * Fetches data from given url\n     */\n    this.getMe = (url, config) => {\n      return axios.get(url, config);\n    };\n    this.get = (url, params) => {\n      let response;\n      let paramKeys = [];\n      if (params) {\n        Object.keys(params).forEach(key => {\n          if (params[key] === '' || params[key] === null || params[key] === undefined) {\n            return;\n          }\n          paramKeys.push(`${key}=${params[key]}`);\n        });\n        const queryString = paramKeys && paramKeys.length ? paramKeys.join('&') : \"\";\n        response = axios.get(`${url}?${queryString}`, params);\n      } else {\n        response = axios.get(`${url}`, params);\n      }\n      return response;\n    };\n    /**\n     * post given data to url\n     */\n    this.create = (url, data) => {\n      return axios.post(url, data);\n    };\n    /**\n     * Updates data with patch\n     */\n    this.update = (url, data) => {\n      return axios.patch(url, data);\n    };\n    /**\n     * Updates data with put\n     */\n    this.put = (url, data) => {\n      return axios.put(url, data);\n    };\n    /**\n     * Delete\n     */\n    this.delete = (url, config) => {\n      return axios.delete(url, {\n        ...config\n      });\n    };\n  }\n}\nconst getLoggedinUser = () => {\n  const user = localStorage.getItem(\"authUser\");\n  if (!user) {\n    return null;\n  } else {\n    return JSON.parse(user);\n  }\n};\nexport { APIClient, getLoggedinUser };","map":{"version":3,"names":["message","notification","axios","config","defaults","baseURL","apiUrl","interceptors","response","use","error","status","description","data","Promise","reject","errorObject","request","_JSON$parse","_JSON$parse$data","userData","localStorage","getItem","token","JSON","parse","access_token","headers","Authorization","APIClient","constructor","getMe","url","get","params","paramKeys","Object","keys","forEach","key","undefined","push","queryString","length","join","create","post","update","patch","put","delete","getLoggedinUser","user"],"sources":["/home/joserevete/Documentos/minisplit/pagina/minisplit-master/src/helpers/api_helper.js"],"sourcesContent":["import { message, notification } from \"antd\";\nimport axios from \"axios\";\nimport { config } from \"../common/config\";\n// import { api } from \"../config\";\n\naxios.defaults.baseURL = config.apiUrl;\n\n// content type\n// const authUser = localStorage.getItem(\"authUser\")\n// const token = JSON.parse(authUser) ? JSON.parse(authUser).data.access_token : null;\n\n// if (token)\n//   axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n// Configurar interceptor de respuesta para mostrar notificaciones de error para códigos diferentes a 200\naxios.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    // Si hay un error en la solicitud, mostrar notificación de error para códigos diferentes a 200\n    if (error.response && error.response.status !== 200 && error.response.status !== 401) {\n      notification.error({\n        message: 'Error',\n        description: `${error.response.data.message}`\n      });\n    }\n    return Promise.reject(error);\n  }\n);\n\n// intercepting to capture errors\naxios.interceptors.response.use(\n  function (response) {\n    return response.data ? response.data : response;\n  },\n\n  function (error) {\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\n    const errorObject = {\n      status: error.response ? error.response.status : 500,\n    };\n    switch (error.status) {\n      case 500:\n       errorObject.message = \"Internal Server Error\";\n        break;\n      case 401:\n        errorObject.message = \"Invalid credentials\";\n        break;\n      case 404:\n        errorObject.message = \"Sorry! the data you are looking for could not be found\";\n        break;\n      default:\n        errorObject.message = error.message || error;\n    }\n    return Promise.reject(errorObject);\n  }\n);\n\n/**\n * Sets the default authorization\n * @param {*} token\n */\n// const setAuthorization = (token) => {\n//   axios.defaults.headers.common[\"Authorization\"] = token;\n// };\n\n// Interceptor para agregar token de autorización a todas las solicitudes\naxios.interceptors.request.use(config => {\n  const userData = localStorage.getItem('authUser');\n  const token = JSON.parse(userData) ? JSON.parse(userData)?.data?.access_token : null;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\nclass APIClient {\n  /**\n   * Fetches data from given url\n   */\n\n   getMe = (url, config) => {\n    return axios.get(url, config);\n  };\n  get = (url, params) => {\n    let response;\n\n    let paramKeys = [];\n\n    if (params) {\n      Object.keys(params).forEach((key) => {\n        if (params[key] === '' || params[key] === null || params[key] === undefined) {\n          return;\n        }\n        paramKeys.push(`${key}=${params[key]}`);\n      });\n\n      const queryString = paramKeys && paramKeys.length ? paramKeys.join('&') : \"\";\n      response = axios.get(`${url}?${queryString}`, params);\n    } else {\n      response = axios.get(`${url}`, params);\n    }\n\n    return response;\n  };\n\n  /**\n   * post given data to url\n   */\n  create = (url, data) => {\n    return axios.post(url, data);\n  };\n  /**\n   * Updates data with patch\n   */\n  update = (url, data) => {\n    return axios.patch(url, data);\n  };\n\n  /**\n   * Updates data with put\n   */\n  put = (url, data) => {\n    return axios.put(url, data);\n  };\n\n  /**\n   * Delete\n   */\n  delete = (url, config) => {\n    return axios.delete(url, { ...config });\n  };\n}\nconst getLoggedinUser = () => {\n  const user = localStorage.getItem(\"authUser\");\n  if (!user) {\n    return null;\n  } else {\n    return JSON.parse(user);\n  }\n};\n\nexport { APIClient, getLoggedinUser };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}